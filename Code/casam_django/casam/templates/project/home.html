{% extends 'base.html' %}

{% block title %}Overzicht projecten en foto's{% endblock title %}

{% block scripts %}
  <style type="text/css">
  tr th {
   background-color: #ccc;
  }
  </style>
  <script type="text/javascript">
  var total_images = 0;
  </script>
  
  <script src="/media/prototype.js" type="text/javascript"></script>
  <script src="/media/scriptaculous.js" type="text/javascript"></script>
  <script src="/media/ajax.js" type="text/javascript"></script>
  <script src="/media/getmouse.js" type="text/javascript"></script>
  <script src="/media/images.js" type="text/javascript"></script>
  <script src="/media/landmarks.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    document.onmousemove = getMouseXY;
  </script>

{% endblock scripts %}

{% block body %}
	<div style="float: left; border: 1px solid grey;">
	  <table style="width:200px">
	  <tr><th colspan="2">Foto's</th></tr>
	  {%for im in images%}
	  <tr>
	    <td style="width: 50px;"><img src="{{DATADIR}}thumbnail/50/{{im.path}}" style="width: 50px" /></td>
	    <td>{{im.name}}<br />
	      {{im.added}}<br />
	      {% ifequal im.is_left True %}
	        Links
	      {% else %}
	        Rechts
	      {% endifequal %}
	      <br />
	      <span onClick="show_image('{{DATADIR}}{{im.path}}')" style='cursor: pointer; text-decoration: underline;'>Link</a>
	    </td>
	    </tr>
	  {%endfor%}
	  <tr><td colspan="2" style="border-top: 2px solid grey;"><a href="/fileupload/{{ id }}">Voeg een foto toe</a></td></tr>
	  <tr><th colspan="2">Landmarks</th></tr>
	  {%for mm in mmetings%}
	    <tr><td><div id="mm{{mm.id}}" style="width: 10px; height: 10px; background-color: red; display: inline; cursor: pointer;"> {{mm.name}}</div></td></tr>
	  {% endfor %}
	  <tr><th colspan="2">Geplaatste punten</th></tr>
	  {%for pt in punten %}
	    <tr><td>({{pt.x}},{{pt.y}})</td><td> in {{pt.mogelijkemeting.name}}</td></tr>
	  {% endfor %}
	  </table>
  </div>
  
  <div id="photosContextMenu" style="cursor:pointer;position:absolute; width:200px; right:20px; top:20px; border: 1px solid grey; z-index:9999">
	  <table style="width:200px">
	  <tr><th>Doorzichtbaarheid instellen</th></tr>
	  <tr><td colspan="2" id="sliders"></td></tr>
	  <tr><th>Reset foto's</th></tr>
	  <tr><td id="delete_images"></td></tr>
	  <tr><th>Coordinaten</th></tr>
	  <tr><td><input type="text" id="MouseX" value="0" size="4"> X<br />
	      <input type="text" id="MouseY" value="0" size="4"> Y</td></tr>
	  <tr><th>Ajax resultaten</th></tr>
	  <tr><td id="ajax_result"></td></tr>
	  </table>
	</div>
	
  <div id="big_images">
  </div>
  
  <div id="lmdd" style="display: none; position: absolute; background-color: white; color: black; padding: 5px;">
    <div style="background-color: #ccc;">Opslaan Meting</div>
    <label for="mmx">x: </label><input type="text" style="width: 25px;" id="lmmx" name="mmx" value="" />
    <label for="mmy">y: </label><input type="text" style="width: 25px;" id="lmmy" name="mmy" value="" /><br />
    <label for="mmmeting">Meting: </label><select id="mmmeting" name="mmmeting">
    <option value=""></option>
    {%for mm in mmetings%}
      <option value="{{mm.id}}">{{mm.name}}</option>
    {% endfor %}
    </select><br />
    <button onClick="saveLandMark();">Bewaar</button>
  </div>
  <div id="lmdisplay" style="display: none; position: absolute; background-color: red; width: 2px; height: 2px;">
  
  
  <script type="text/javascript" language="javascript">
  {%for mm in mmetings%}
    new Draggable('mm{{mm.id}}');
  {% endfor %}
  new Draggable('lmdd');
  </script>
{% endblock body %}
